1，在建立工程之前，在电脑的某个目录下面建立一个文件夹，后面所建立的工程都可以放在这个文件夹下面，
这里我们建立一个文件夹为Temlate。

2，点击MDK的菜单：Project->New Uvision Project，然后将目录定位到刚才建立的文件夹Template之下，
在这个目录下建立子文件夹USER,(我们的代码工程文件都是放在USER目录，很多人喜欢新建Project目录放在
下面，这也是可以的，这个就看个人喜好了）；然后定位到USER目录下面我们的工程文件都保存在USER文件
夹下面，工程命名为Template，点击保存。

3，接下来选择cpu的型号，然后点击OK，MDK会弹出Manage Run-Time Environment对话框。直接点击ok即可。


到这一步，我们只是建了一个框架，还需要添加启动代码，以及.c文件等


4，现在我们看看USER目录下面包含的2个文件和2个文件夹，
	文件夹：Listings
	             Objects：这两个文件夹是MDK自动生成的文件夹，用于存放编译过程产生的中间文件
		为了跟MDK 5.1版本之前的工程兼容，我们把这两个文件夹删除，会在下一步中新创建一个
		OBJ文件夹，用来存放编译的中间文件。
	文件：Template.uvoptx
                        Template.uvprojx:是工程文件，非常关键，不能轻易删除

5，接下来，我们在Template工程目录下面，新建3个文件夹CORE,OBJ以及STM32F10x_FWLib.
		CORE是用来存放核心文件和启动文件
		OBJ文件夹是用来存放编译过程产生的hex文件
		STM32F10x_FWLib文件夹是用来存放ST官方提供的库函数源码文件。
		已有的USER文件夹用来存放工程文件和主函数文件main.c,以及其他的文件

6，下面，我们要将官方的固件库包里的源码文件复制到我们的工程目录文件夹下面。
	打开官方固件库包，定位到我们之前准备好的固件库包的目录
	STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\STM32F10x_StdPeriph_Driver下面，降目录下面的src，inc文件夹
	copy到我们刚才建立的STM32F10x_FWLib文件夹下面。
		src存放的是固件库的.c文件，inc存放的对应的.h文件。

7，下面我们将固件库包里面相关的启动文件复制到我们的工程目录CORE之下。
	打开官方固件库包，然后定位到目录：STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\CMSIS\CM3\CoreSupport下面：
	将文件core_cm3.c和文件core_cm3.h复制到CORE目录下。
	然后再定位到
	STM32F10x_StdPeriph_Lib_V3.5.0  \Libraries  \CMSIS  \CM3  \DeviceSupport  \ST  \STM32F10x   \startup   \arm 下面
	将里面的startup_stm32f10x_hd.s文件复制到CORE下面。

	现在CORE目录下面有三个文件：
		core_cm3.c
		core_cm3.h
		startup_stm32f10x_hd.s

8，定位到目录：
	STM32F10x_StdPeriph_Lib_V3.5.0     \Libraries     \CMSIS      \CM3      \DeviceSupport        \ST       \STM32F10x 下面
	将里面的三个文件
			stm32f10x.h，
			system_stm32f10x.c，
			system_stm32f10x.h，复制到我们的 USER目录之下。
	然后将
	STM32F10x_StdPeriph_Lib_V3.5.0            \Project            \STM32F10x_StdPeriph_Template   下面的 4 个文件
		main.c，
		stm32f10x_conf.h，
		stm32f10x_it.c，
		stm32f10x_it.h 复制到 USER 目录下面。

9，前面 8 个步骤，我们将需要的固件库相关文件复制到了我们的工程目录下面，下面我们将
	这些文件加入我们的工程中去。右键点击 Target1，选择 Manage Project Items。

10，Project Targets一栏，我们将Target名字修改为Template,然后在Groups一栏删掉一个Source Group1，
	建立三个 Groups：
			USER,
			CORE,
			FWLIB。然后点击 OK。

11，下面我们往 Group 里面添加我们需要的文件。我们按照步骤 10 的方法， 右键点击点击            Tempate，
	选择         Manage Project Itmes，        然后选择需要添加文件的 Group，这里第一步我们选择        FWLIB，
	然后点击右边的      Add Files,         定位到我们刚才建立的目录     STM32F10x_FWLib      /src    下面，
	将里面所有的文件选中(Ctrl+A)，然后点击    Add，然后 Close.
	可以看到 Files 列表下面包含我们添加的文件。


	这里需要说明一下，对于我们写代码，如果我们只用到了其中的某个外设，我们就可以不
	用添加没有用到的外设的库文件。例如我只用 GPIO，我可以只用添加 stm32f10x_gpio.c 而
	其他的可以不用添加。这里我们全部添加进来是为了后面方便，不用每次添加，当然这样
	的坏处是工程太大，编译起来速度慢，用户可以自行选择。

12，用同样的方法，将 Groups 定位到 CORE 和 USER 下面，添加需要的文件。这里我们的 
	CORE 下面需要添加的文件为 
					core_cm3.c，
					startup_stm32f10x_hd.s ( 注意，默认添加的时候文件类型为.c, 
	也就是添加 startup_stm32f10x_hd.s  启动文件的时候，你需要选择文件类型为 All files  才能看得到这个文件)，
	USER 目录下面需要添加的文件为 
				main.c，
				stm32f10x_it.c，
				system_stm32f10x.c.

	这样我们需要添加的文件已经添加到我们的工程中了，最后点击 OK，回到工程主界面。

13) 接下来我们要编译工程，在编译之前我们首先要选择编译中间文件编译后存放目录。
	方法是点击魔术棒，然后选择     “Output”     选项下面的         “Select folder for objects…”          ,然后选
	择目录为我们上面新建的    OBJ      目录。这里大家注意，如果我们不设置 Output 路径，那么
	默认的编译中间文件存放目录就是 MDK 自动生成的 Objects 目录和 Listings 目录。

14) 下面我们点击编译按钮 编译工程，可以看到很多报错，因为找不到头文件。

15) 下面我们要告诉 MDK，在哪些路径之下搜索需要的头文件，也就是头文件目录。 这里大家要注意，对于任何一个工程，
	我们都需要把工程中引用到的所有头文件的路径都包含到进来 。回到工程主菜单，点击魔术棒 ，出来一个菜单，然后
	点击 c/c++选项.然后点击Include Paths 右边的按钮。弹出一个添加 path 的对话框，然后我们将图上面的 3 个目录添
	加进去。记住，keil 只会在一级目录查找，所以如果你的目录下面还有子目录，记得 path一定要定位到最后一级子目录。
	然后点击 OK.

16) 接下来，我们再来编译工程，可以看到又报了很多同样的错误。为什么呢?这是因为 3.5 版本的库函数在配置和选择外设的
	时候通过宏定义来选择的，所以我们需要配置一个全局的宏定义变量。按照步骤 16，定位到 c/c++界面，然后填写
	“STM32F10X_HD,USE_STDPERIPH_DRIVER” 	到 	Define	 输入框里面( 请注意，两个标识符中间是逗号
	不是句号，如果您不能确定您输入的是正确的，请直接打开我们光盘任何一个库函数实例，然后复制 过来这串文字即可)。这里解释一下，如果你用的是中容量那么
	STM32F10X_HD 	修改为 	STM32F10X_MD	，小容量修改为 	STM32F10X_LD	. 然后点击 OK。

 	这样一个工程模版建立完毕。下面还需要配置，让编译之后能够生成 hex 文件。同样点击
	魔术棒，进入配置菜单，选择 Output。然后勾上下三个选项。 其中 Create HEX file 是编
	译生成 hex 文件，Browser Information 是可以查看变量和函数定义。